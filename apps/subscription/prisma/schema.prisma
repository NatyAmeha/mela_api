generator client {
    provider      = "prisma-client-js"
    // output   = "./generated/prisma_subscription_client"
    binaryTargets = ["native", "darwin", "debian-openssl-1.1.x", "linux-arm64-openssl-1.1.x"]
}

datasource db {
    provider = "mongodb"
    url      = env("SUBSCRIPTION_DB_URL")
}

model SubscriptionPlan {
    id            String         @id @default(auto()) @map("_id") @db.ObjectId
    name          NameType[]
    description   NameType[]
    price         Float
    category      String[]
    benefits      BenefitType[]
    duration      Int
    trialPeriod   Int?
    type          String
    subscriptions Subscription[]
    owner         String?        @db.ObjectId
    isActive      Boolean        @default(true)
    createdAt     DateTime       @default(now())
    updatedAt     DateTime       @default(now())
}

model Subscription {
    id                  String           @id @default(auto()) @map("_id") @db.ObjectId
    startDate           DateTime         @default(now())
    endDate             DateTime
    subscriptioinPlanId String           @db.ObjectId
    plan                SubscriptionPlan @relation(fields: [subscriptioinPlanId], references: [id])
    isTrialPeriod       Boolean?         @default(false)
    type                String
    owner               String?          @db.ObjectId
    createdAt           DateTime         @default(now())
    updatedAt           DateTime         @default(now())
}

type BenefitType {
    tags         String[]
    descriptions NameType[]
}

type NameType {
    key   String
    value String
}
